/* eslint-disable */
import{v as e}from"../_includes/dester-inject-JSON.mjs";import{hash as n}from"../utilites/hash/index.mjs";import{safeRemoveQuotes as t}from"../utilites/index.mjs";import{stringifyTokens as r}from"../jsx2tokens/index.mjs";import{jsx2tokens as s,TOKEN_TYPES as i}from"jsx2tokens";import"../_includes/dester-inject-Math.mjs";var a={BRACE:"Brace",AT_RULE_LINE:"AtRuleLine",AT_RULE_BLOCK:"AtRuleBlock",SELECTOR:"Selector",KEYFRAME:"Keyframe",ATTRIBUTE:"Attribute"};function l(n){return e(n).slice(1,-1)}function u(e){for(var n,t=e.length;t-- >0&&void 0===(n=e[t]););return n}function o(e){return e.replace(/\s$/,"")}function c(e){for(var n,t,r=[],s="",i=-1;++i<e.length;)(t=e[i])&&("@"!==t[0]?s=t:(/^@media\b/.test(t)&&(null!=n&&r.splice(n,1),n=r.length),r.push(t)));return s&&r.push(s),r}function f(e,n,t){e.push([n,t])}function h(n,r,h){if("`"!==(n=n.trim())[0])throw n;for(var p={},E=s(n,{useJSX:!1,proxy:function(e){e.type===i.IDENTIFIER&&(p[e.value]=!0)}}),g=0,v="_s";v+g in p;)g++;v+=g;for(var R="_p";R+g in p;)g++;R+=g;var T=0,m=E[0].deep,d={},A=null;n="";for(var b,L=E.length;L-- >0;)(b=E[L]).deep===m?(A=null,n=(b.value=t(b.value))+n):null==A?(b.type=i.MODIFIER,d[A="%REASE%PROP%"+T+++"%"]=b.value,n=(b.value=A)+n):(E.splice(L,1),d[A]=b.value+d[A]);var k=[],_=[],j=[],B=[],S={},C=[];!function(e,n){var t,r,s,i,l=[],u=e.length,c=!0,f=c,h=0,p="",E=0,g=[],v=-1,R=!1;function T(e){var t;((p=o(p))&&g.push(p)||g.length)&&("@"===g[0][0]?(p=g.shift(),(s=p.match(/@[\w-]+/)[0].length)<p.length-1&&g.unshift(p.slice(" "===p[s]?s+1:s)),g.unshift(p.slice(0,s)),e=e===a.SELECTOR?(!R&&"@keyframes"===g[0]&&(R=!0,v=E),a.AT_RULE_BLOCK):a.AT_RULE_LINE):R&&(e===a.BRACE&&"}"===g[0]&&E<=v?R=!1:e===a.SELECTOR&&(e=a.KEYFRAME)),e===a.ATTRIBUTE&&(t=g).unshift.apply(t,g.shift().split(/(:)/)),l.push({deep:E,type:e,data:g}),p="",g=[],n&&n(l[l.length-1],l.length,l))}for(var m=-1;++m<u;)if((f=c)!==(c=!(t=e[m]).trim()&&(t=" ",!0))||!c)switch(t){case"{":p=o(p),c=!0,h?p+=t:(T(a.SELECTOR),p=t,T(a.BRACE),E++);break;case"}":p=o(p),c=!0,h?p+=t:(T(a.ATTRIBUTE),E>0&&E--,p=t,T(a.BRACE));break;case";":p=o(p),c=!0,h?p+=t:T(a.ATTRIBUTE);break;case"(":h++;case"[":c=!0,h<2&&(p&&g.push(p),p=""),p+=t;break;case")":h--;case"]":p=o(p)+t,h||(g.push(p),p="");break;case",":c=!0,p=o(p),h?p+=t:(p&&g.push(p),g.push(t),p="");break;case":":case"=":c=!0,p=o(p)+t;break;case"`":case"'":case'"':for(p+=t,i=!1;++m<u&&(p+=e[m],i||e[m]!==t);i=!i&&"\\"===e[m]);break;case"/":if("*"===(r=e[m+1])){for(r=p,p=t,c=f;++m<u&&!((p+=e[m]).length>3&&"/"===e[m]&&"*"===e[m-1]););p=r}else if("/"===r){for(r=p,p=t,c=f;++m<u&&(p+=e[m],/[^\r\n\u2028\u2029]/.test(e[m])););p=r}else t&&(p+=t);break;default:p+=t}T(a.ATTRIBUTE)}(n,(function(e){var n=e.deep,t=e.type,r=e.data;switch(t){case a.BRACE:"}"===r[0]&&(k.length=_.length=j.length=n,k[n]=_[n]=j[n]=void 0);break;case a.SELECTOR:k[n]=void 0,k[n]=function(e,n){for(var t,r,s=[],i=[],a=!1,l=e.length,u=-1;u++<l;)if(u===l||","===(r=e[u])){a||(i[0]&&!/^[|>+~\s]/.test(i[0])&&i.unshift(" "),i.unshift("&"));for(var o=-1;++o<n.length;)t=i.map((function(e){return"&"===e?this[0]:e}),[n[o]]).join("").replace(/^[\s,&|>+~]+|[\s,&|>+~]+$/g,""),t&&s.push(t);a=!1,i=[]}else if("("===r[0]||"["===r[0])i.push(r);else for(var c=r.split(/(&)|\s*([|>+~\s])\s*/),f=-1;++f<c.length;)c[f]&&("&"===(r=c[f])?a=!0:r=r.replace(/\._(\w+)/g,"%REASE%SELECTOR%$1"),i.push(r));return s}(r,u(k)||[""]),j[n]=u(k).join(",");break;case a.KEYFRAME:j[n]=r.join("");break;case a.AT_RULE_BLOCK:if("@media"===r[0])_[n]=void 0,_[n]=function(e,n){for(var t,r,s=[],i=[],a=e.length,l=-1;l++<a;)if(l===a||","===(r=e[l])){if(t=i.join(""))for(var u=-1;++u<n.length;)s.push(n[u]?n[u]+" and "+t:t);i=[]}else i.push(r);return s}(r.slice(1),u(_)||[""]),j[n]=r[0]+" "+u(_).join(",");else j[n]=r[0]+(r.length>1?" "+r.slice(1).join(""):"");break;case a.AT_RULE_LINE:f(B,c(j),l(r[0]+(r.length>1?" "+r.slice(1).join(""):"")));break;case a.ATTRIBUTE:f(B,c(j),l(r.join("")).replace(/^\s*(\w[\w-]*)\s*:/,(function(e,n){return n in S||(S[n]=C.length,C.push(n)),'"+'+R+"["+S[n]+']+"'})))}}));var O='"'+function(e){for(var n,t,r="",s=[],i=0,a=-1;a++<e.length;){var u=e[a]||[[],""];for(n=u[0],t=u[1],i=s.length;i>0&&""+s.slice(0,i)!=""+n.slice(0,i);)";"===r[r.length-1]&&(r=r.slice(0,-1)),r+="}",i--;for(;i<n.length;i++)r+=l(n[i])+"{";t&&(r+=t+";"),s=n}return r}(B)+'"',I={},U=[];return O=function(e,n){return e.replace(/(%REASE%PROP%\d+%)/g,(function(e,t){return t in n?'"+('+n[t]+')+"':t})).trim()}(O=(O=O.replace(/%REASE%SELECTOR%(\w+)/g,(function(e,n){return n in I||(I[n]=U.length,U.push(n)),'"+'+v+'+"'+I[n]}))).replace(/""\s*\+\s*/g,""),d),'{\n    id: "'+r+'",\n    _: ('+R+(U.length?", "+v:"")+") => ("+O+"),\n    init() {\n      return "+h+".i(\n        this,\n        "+e(U)+",\n        "+e(C)+"\n      )\n    }\n  }"}function p(e,t){for(var i,a,l=void 0===t?{}:t,u=l.salt,o=void 0===u?"":u,c=l.useJSX,f=void 0!==c&&c,p=l.importPath,E=void 0===p?"rease/css":p,g=n(e,0,!0),v=/\bimport\b\s*(?:(?:\/\*.*?\*\/)?\s*(?:\/\/[^\n]*)?\s*)*([^]+?)(?:(?:\/\*.*?\*\/)?\s*(?:\/\/[^\n]*)?\s*)*\bfrom\b\s*(?:(?:\/\*.*?\*\/)?\s*(?:\/\/[^\n]*)?\s*)*['"`]([^'"`]+)['"`]/g;a=v.exec(e);)if(a[2]===E){i=a[1],e=e.replace(a[0],"import { "+("css"===i?i:"css as "+i)+" } from 'rease'");break}if(i)for(var R=0,T="",m="";(R=e.indexOf(i+"`",R))>-1;)m=h(T=r(s(e.slice(R+i.length),{useJSX:f,proxy:function(e){return 0===e.deep&&"`"===e.value[e.value.length-1]}})),g=n(g+o),i),e=e.slice(0,R)+m+e.slice(R+T.length+i.length),R+=m.length;return e}export{p as css};
