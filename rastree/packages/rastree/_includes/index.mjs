/* eslint-disable */
import{jsx2tokens as e,TOKEN_TYPES as n}from"jsx2tokens";import{safeRemoveQuotes as r}from"../utilites/index.mjs";import{isStorefyForExpo as t}from"../storefy/index.mjs";var s=JSON.stringify,i="Brace",a="AtRuleLine",l="AtRuleBlock",u="Selector",c="Keyframe",o="Attribute";function f(e){return s(e).slice(1,-1)}function h(e){for(var n,r=e.length;r-- >0&&void 0===(n=e[r]););return n}function p(e){return e.replace(/\s$/,"")}function g(e){for(var n,r,t=[],s="",i=-1;++i<e.length;)(r=e[i])&&("@"!==r[0]?s=r:(/^@media\b/.test(r)&&(null!=n&&t.splice(n,1),n=t.length),t.push(r)));return s&&t.push(s),t}function v(e,n,r){e.push([n,r])}function d(d,k,m,b){if("`"!==(d=d.trim())[0])throw d;for(var E={},R=e(d,{useJSX:!1,proxy:function(e){e.type===n.IDENTIFIER&&(E[e.value]=!0)}}),j=0,y="_s";y+j in E;)j++;y+=j;for(var S="_p";S+j in E;)j++;S+=j;var w=0,A=R[0].deep,O={},x=null;d="";for(var I,P=R.length;P-- >0;)(I=R[P]).deep===A?(x=null,d=(I.value=r(I.value))+d):null==x?(I.type=n.MODIFIER,O[x="%REASE%PROP%"+w+++"%"]=I.value,d=(I.value=x)+d):(R.splice(P,1),O[x]=I.value+O[x]);var $=[],C=[],L=[],T=[],_={},B=[];!function(e,n){var r,t,s,f,h=[],g=e.length,v=!0,d=v,k=0,m="",b=0,E=[],R=-1,j=!1;function y(e){var r;((m=p(m))&&E.push(m)||E.length)&&("@"===E[0][0]?(m=E.shift(),(s=m.match(/@[\w-]+/)[0].length)<m.length-1&&E.unshift(m.slice(" "===m[s]?s+1:s)),E.unshift(m.slice(0,s)),e=e===u?(!j&&"@keyframes"===E[0]&&(j=!0,R=b),l):a):j&&(e===i&&"}"===E[0]&&b<=R?j=!1:e===u&&(e=c)),e===o&&(r=E).unshift.apply(r,E.shift().split(/(:)/)),h.push({deep:b,type:e,data:E}),m="",E=[],n&&n(h[h.length-1],h.length,h))}for(var S=-1;++S<g;)if((d=v)!==(v=!(r=e[S]).trim()&&(r=" ",!0))||!v)switch(r){case"{":m=p(m),v=!0,k?m+=r:(y(u),m=r,y(i),b++);break;case"}":m=p(m),v=!0,k?m+=r:(y(o),b>0&&b--,m=r,y(i));break;case";":m=p(m),v=!0,k?m+=r:y(o);break;case"(":k++;case"[":v=!0,k<2&&(m&&E.push(m),m=""),m+=r;break;case")":k--;case"]":m=p(m)+r,k||(E.push(m),m="");break;case",":v=!0,m=p(m),k?m+=r:(m&&E.push(m),E.push(r),m="");break;case":":case"=":v=!0,m=p(m)+r;break;case"`":case"'":case'"':for(m+=r,f=!1;++S<g&&(m+=e[S],f||e[S]!==r);f=!f&&"\\"===e[S]);break;case"/":if("*"===(t=e[S+1])){for(t=m,m=r,v=d;++S<g&&!((m+=e[S]).length>3&&"/"===e[S]&&"*"===e[S-1]););m=t}else if("/"===t){for(t=m,m=r,v=d;++S<g&&(m+=e[S],/[^\r\n\u2028\u2029]/.test(e[S])););m=t}else r&&(m+=r);break;default:m+=r}y(o)}(d,(function(e){var n=e.deep,r=e.type,t=e.data;switch(r){case i:"}"===t[0]&&($.length=C.length=L.length=n,$[n]=C[n]=L[n]=void 0);break;case u:$[n]=void 0,$[n]=function(e,n){for(var r,t,s=[],i=[],a=!1,l=e.length,u=-1;u++<l;)if(u===l||","===(t=e[u])){a||(i[0]&&!/^[|>+~\s]/.test(i[0])&&i.unshift(" "),i.unshift("&"));for(var c=-1;++c<n.length;)r=i.map((function(e){return"&"===e?this[0]:e}),[n[c]]).join("").replace(/^[\s,&|>+~]+|[\s,&|>+~]+$/g,""),r&&s.push(r);a=!1,i=[]}else if("("===t[0]||"["===t[0])i.push(t);else for(var o=t.split(/(&)|\s*([|>+~\s])\s*/),f=-1;++f<o.length;)o[f]&&("&"===(t=o[f])?a=!0:t=t.replace(/\.?\$(\w+)/g,"%REASE%SELECTOR%$1"),i.push(t));return s}(t,h($)||[""]),L[n]=h($).join(",");break;case c:L[n]=t.join("");break;case l:if("@media"===t[0])C[n]=void 0,C[n]=function(e,n){for(var r,t,s=[],i=[],a=e.length,l=-1;l++<a;)if(l===a||","===(t=e[l])){if(r=i.join(""))for(var u=-1;++u<n.length;)s.push(n[u]?n[u]+" and "+r:r);i=[]}else i.push(t);return s}(t.slice(1),h(C)||[""]),L[n]=t[0]+" "+h(C).join(",");else L[n]=t[0]+(t.length>1?" "+t.slice(1).join(""):"");break;case a:v(T,g(L),f(t[0]+(t.length>1?" "+t.slice(1).join(""):"")));break;case o:v(T,g(L),f(t.join("")).replace(/^\s*(\w[\w-]*)\s*:/,(function(e,n){return n in _||(_[n]=B.length,B.push(n)),'"+'+S+"["+_[n]+']+"'})))}}));var D,F='"'+function(e){for(var n,r,t="",s=[],i=0,a=-1;a++<e.length;){var l=e[a]||[[],""];for(n=l[0],r=l[1],i=s.length;i>0&&""+s.slice(0,i)!=""+n.slice(0,i);)";"===t[t.length-1]&&(t=t.slice(0,-1)),t+="}",i--;for(;i<n.length;i++)t+=f(n[i])+"{";r&&(t+=r+";"),s=n}return t}(T)+'"',J={},N=[];for(var K in k=function(e){for(var n=function(e){for(var n,r=1,t=(e+="").length,s=t/99|0||1,i=0;i<t;i+=s)13===(n=e.charCodeAt(i))?i-=s-1:(r+=n*r*997/(n+r)+.0001002707309736288)>0&&(r-=0|r);return r}(e).toString(36).slice(2)||"0";n.length<9;)n+=n;return n=n.slice(0,9),/\d/.test(n[0])&&(n="h"+n.slice(0,8)),n}(k+d),F=F.replace(/%REASE%SELECTOR%(\w+)/g,(function(e,n){return n in J||(J[n]=N.length,N.push(n)),'."+'+y+"+"+J[n]+'+"'})),O)t(D=b(O[K]))||(O[K]="("+D+")!!");return F=function(e,n){return e.replace(/(%REASE%PROP%\d+%)/g,(function(e,r){return r in n?'"+('+n[r]+')+"':r})).trim()}(F,O),F=b(F=F.replace(/""\s*\+\s*/g,"")),'{\n  id: "'+k+'",\n  _: ('+S+(N.length?", "+y:"")+") => ("+F+"),\n  on() {\n    "+m+"(\n      this,\n      "+s(N)+",\n      "+s(B)+"\n    )\n  }\n}"}export{d as s,s as v};
